{"ast":null,"code":"import _slicedToArray from\"/Users/harryedwards/Work/FL/_examples/mapping/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useContext,useState}from'react';import{htmlDecode}from'../../helpers';import{DispatchContext,StateContext}from'../../MapApp';import Button from'../../ui/Button';import{AppState}from'../../utils/types';import{motion}from'framer-motion';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function RouteCategoryFilters(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _ref=useContext(StateContext),state=_ref.state;var _ref2=useContext(DispatchContext),dispatch=_ref2.dispatch;var routeCategoryData=state.routeCategoryData,activeRouteFilters=state.activeRouteFilters;// Hide/show category buttons\nfunction handleToggleCategory(){setOpen(!open);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Button,{classes:\"category-label \".concat(open&&'active',\" \").concat(activeRouteFilters.length>0&&'selected'),clicked:handleToggleCategory,ariaLabel:\"Click to toggle routes\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"Category arrow\"}),\"Routes\"]}),open&&/*#__PURE__*/_jsx(motion.div,{className:\"filters-dropdown\",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:'easeInOut'},children:routeCategoryData.map(function(category){return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(Button,{clicked:function clicked(){return dispatch({type:AppState.ACTIVE_ROUTE_CATEGORIES,mode:category.tid});},classes:\"category \".concat(activeRouteFilters.includes(category.tid)&&'active'),\"data-tid\":category.tid,children:[/*#__PURE__*/_jsx(\"span\",{className:\"check\",role:\"checkbox\",\"aria-checked\":activeRouteFilters.includes(category.tid),\"aria-label\":\"Visual checkbox for category\"}),htmlDecode(category.name),/*#__PURE__*/_jsx(\"span\",{className:\"icon\",style:{backgroundColor:category.route_colour}})]})},category.tid);})})]});}","map":{"version":3,"names":["Fragment","useContext","useState","htmlDecode","DispatchContext","StateContext","Button","AppState","motion","RouteCategoryFilters","open","setOpen","state","dispatch","routeCategoryData","activeRouteFilters","handleToggleCategory","length","opacity","ease","map","category","type","ACTIVE_ROUTE_CATEGORIES","mode","tid","includes","name","backgroundColor","route_colour"],"sources":["/Users/harryedwards/Work/FL/_examples/mapping/src/components/filters/RouteCategoryFilters.tsx"],"sourcesContent":["import { Fragment, useContext, useState } from 'react'\nimport { htmlDecode } from '../../helpers'\nimport { DispatchContext, StateContext } from '../../MapApp'\nimport Button from '../../ui/Button'\nimport {\n  AppState,\n  DispatchContextT,\n  StateContextT,\n  TaxonomyEntity,\n} from '../../utils/types'\nimport { motion } from 'framer-motion'\n\nexport default function RouteCategoryFilters() {\n  const [open, setOpen] = useState(false)\n\n  const { state } = useContext(StateContext) as StateContextT\n  const { dispatch } = useContext(DispatchContext) as DispatchContextT\n  const { routeCategoryData, activeRouteFilters } = state\n\n  // Hide/show category buttons\n  function handleToggleCategory() {\n    setOpen(!open)\n  }\n\n  return (\n    <>\n      <Button\n        classes={`category-label ${open && 'active'} ${\n          activeRouteFilters.length > 0 && 'selected'\n        }`}\n        clicked={handleToggleCategory}\n        ariaLabel={`Click to toggle routes`}\n      >\n        <span role=\"img\" aria-label=\"Category arrow\"></span>\n        Routes\n      </Button>\n\n      {open && (\n        <motion.div\n          className=\"filters-dropdown\"\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ ease: 'easeInOut' }}\n        >\n          {routeCategoryData.map((category: TaxonomyEntity) => (\n            <Fragment key={category.tid}>\n              <Button\n                clicked={() =>\n                  dispatch({\n                    type: AppState.ACTIVE_ROUTE_CATEGORIES,\n                    mode: category.tid,\n                  })\n                }\n                classes={`category ${\n                  activeRouteFilters.includes(category.tid) && 'active'\n                }`}\n                data-tid={category.tid}\n              >\n                <span\n                  className=\"check\"\n                  role=\"checkbox\"\n                  aria-checked={activeRouteFilters.includes(category.tid)}\n                  aria-label=\"Visual checkbox for category\"\n                ></span>\n                {htmlDecode(category.name)}\n                <span\n                  className=\"icon\"\n                  style={{ backgroundColor: category.route_colour }}\n                ></span>\n              </Button>\n            </Fragment>\n          ))}\n        </motion.div>\n      )}\n    </>\n  )\n}\n"],"mappings":"mIAAA,OAASA,QAAT,CAAmBC,UAAnB,CAA+BC,QAA/B,KAA+C,OAA/C,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,eAAT,CAA0BC,YAA1B,KAA8C,cAA9C,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,OACEC,QADF,KAKO,mBALP,CAMA,OAASC,MAAT,KAAuB,eAAvB,C,6IAEA,cAAe,SAASC,qBAAT,EAAgC,CAC7C,cAAwBP,QAAQ,CAAC,KAAD,CAAhC,wCAAOQ,IAAP,eAAaC,OAAb,eAEA,SAAkBV,UAAU,CAACI,YAAD,CAA5B,CAAQO,KAAR,MAAQA,KAAR,CACA,UAAqBX,UAAU,CAACG,eAAD,CAA/B,CAAQS,QAAR,OAAQA,QAAR,CACA,GAAQC,kBAAR,CAAkDF,KAAlD,CAAQE,iBAAR,CAA2BC,kBAA3B,CAAkDH,KAAlD,CAA2BG,kBAA3B,CAEA;AACA,QAASC,qBAAT,EAAgC,CAC9BL,OAAO,CAAC,CAACD,IAAF,CAAP,CACD,CAED,mBACE,wCACE,MAAC,MAAD,EACE,OAAO,0BAAoBA,IAAI,EAAI,QAA5B,aACLK,kBAAkB,CAACE,MAAnB,CAA4B,CAA5B,EAAiC,UAD5B,CADT,CAIE,OAAO,CAAED,oBAJX,CAKE,SAAS,yBALX,wBAOE,aAAM,IAAI,CAAC,KAAX,CAAiB,aAAW,gBAA5B,EAPF,YADF,CAYGN,IAAI,eACH,KAAC,MAAD,CAAQ,GAAR,EACE,SAAS,CAAC,kBADZ,CAEE,OAAO,CAAE,CAAEQ,OAAO,CAAE,CAAX,CAFX,CAGE,OAAO,CAAE,CAAEA,OAAO,CAAE,CAAX,CAHX,CAIE,IAAI,CAAE,CAAEA,OAAO,CAAE,CAAX,CAJR,CAKE,UAAU,CAAE,CAAEC,IAAI,CAAE,WAAR,CALd,UAOGL,iBAAiB,CAACM,GAAlB,CAAsB,SAACC,QAAD,qBACrB,KAAC,QAAD,wBACE,MAAC,MAAD,EACE,OAAO,CAAE,yBACPR,SAAQ,CAAC,CACPS,IAAI,CAAEf,QAAQ,CAACgB,uBADR,CAEPC,IAAI,CAAEH,QAAQ,CAACI,GAFR,CAAD,CADD,EADX,CAOE,OAAO,oBACLV,kBAAkB,CAACW,QAAnB,CAA4BL,QAAQ,CAACI,GAArC,GAA6C,QADxC,CAPT,CAUE,WAAUJ,QAAQ,CAACI,GAVrB,wBAYE,aACE,SAAS,CAAC,OADZ,CAEE,IAAI,CAAC,UAFP,CAGE,eAAcV,kBAAkB,CAACW,QAAnB,CAA4BL,QAAQ,CAACI,GAArC,CAHhB,CAIE,aAAW,8BAJb,EAZF,CAkBGtB,UAAU,CAACkB,QAAQ,CAACM,IAAV,CAlBb,cAmBE,aACE,SAAS,CAAC,MADZ,CAEE,KAAK,CAAE,CAAEC,eAAe,CAAEP,QAAQ,CAACQ,YAA5B,CAFT,EAnBF,GADF,EAAeR,QAAQ,CAACI,GAAxB,CADqB,EAAtB,CAPH,EAbJ,GADF,CAqDD"},"metadata":{},"sourceType":"module"}