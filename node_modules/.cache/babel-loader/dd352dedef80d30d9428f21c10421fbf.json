{"ast":null,"code":"import{useCallback,useContext,useEffect,useRef}from'react';import{DispatchContext}from'../../MapApp';import{htmlDecode}from'../../helpers';import{AppState}from'../../utils/types';import Button from'../../ui/Button';import InfoBarStyles from'./InfoBar.styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";/**\n * InfoBar content\n */export default function InfoBar(_ref){var data=_ref.data;var _ref2=useContext(DispatchContext),dispatch=_ref2.dispatch;var infoBar=useRef(null);// Close infoBar when pressing `Esc` key\nvar handleKeyDown=useCallback(function(e){if(e.key==='Escape'){dispatch({type:AppState.SHOW_INFO_BAR,mode:null});}},[dispatch]);useEffect(function(){// When infoBar open, listen for keypress, & set focus for correct tabbing control\nwindow.addEventListener('keydown',handleKeyDown);// @ts-ignore\ninfoBar.current.focus();document.body.classList.add('locked');return function(){window.removeEventListener('keydown',handleKeyDown);document.body.classList.remove('locked');};},[handleKeyDown]);return/*#__PURE__*/_jsxs(InfoBarStyles,{ref:infoBar,tabIndex:0,children:[/*#__PURE__*/_jsx(Button,{clicked:function clicked(){return dispatch({type:AppState.SHOW_INFO_BAR,mode:null});},classes:'block-map__info__close',ariaLabel:'Close info bar and return to map',children:/*#__PURE__*/_jsx(\"svg\",{viewBox:\"0 0 22 28\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.281 20.656c0 0.391-0.156 0.781-0.438 1.062l-2.125 2.125c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-4.594-4.594-4.594 4.594c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-2.125-2.125c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l4.594-4.594-4.594-4.594c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.594 4.594-4.594c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062s-0.156 0.781-0.438 1.062l-4.594 4.594 4.594 4.594c0.281 0.281 0.438 0.672 0.438 1.062z\"})})}),data.image&&/*#__PURE__*/_jsx(\"img\",{src:data.image,alt:data.imageAlt?data.imageAlt:data.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:htmlDecode(data.title)}),data.content&&/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:data.content}}),data.distance&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Distance\"}),/*#__PURE__*/_jsx(\"p\",{children:data.distance})]}),data.postcode&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Postcode\"}),/*#__PURE__*/_jsx(\"p\",{children:data.postcode})]}),data.accessibility_terrain_walk_info&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Accessibility/terrain/walk info\"}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:data.accessibility_terrain_walk_info}})]}),data.facilities_accessibility&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Facilities & accessibility\"}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:data.facilities_accessibility}})]}),data.links&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"More information\"}),/*#__PURE__*/_jsx(\"div\",{className:\"links\",children:data.links.map(function(link,i){return/*#__PURE__*/_jsx(\"a\",{href:link.url,target:link.target,children:link.title},i);})})]}),data.download&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Download more information\"}),/*#__PURE__*/_jsx(\"a\",{href:data.download,title:\"Download file\",className:\"download\",children:/*#__PURE__*/_jsxs(\"svg\",{width:\"50\",height:\"63\",viewBox:\"0 0 50 63\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M49.3 53.9001H47.3V14.6001L35.3 2.6001H7.59998V53.9001H5.59998V0.600098H36.2L49.3 13.8001V53.9001Z\",fill:\"#686867\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M49.3 54.9001H41.7V52.9001H47.3V15.8001H34.1V2.6001H7.59998V52.9001H13.2V54.9001H5.59998V0.600098H36.1V13.8001H49.3V54.9001Z\",fill:\"#686867\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M40.9 48.9L27.5 62.1L14.1 48.9H20.7V33H34.3V48.9H40.9Z\",fill:\"#A65F8A\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M29.8 8.8999H0V22.0999H29.8V8.8999Z\",fill:\"#A65F8A\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M10.5 14.0001C10.5 14.8001 10.2 15.5001 9.69998 15.9001C9.19998 16.3001 8.39998 16.6001 7.39998 16.6001H6.79998V19.4001H5.09998V11.6001H7.59998C8.59998 11.6001 9.29998 11.8001 9.79998 12.2001C10.3 12.6001 10.5 13.2001 10.5 14.0001ZM6.79998 15.3001H7.29998C7.79998 15.3001 8.19998 15.2001 8.39998 15.0001C8.69998 14.8001 8.79998 14.5001 8.79998 14.1001C8.79998 13.7001 8.69998 13.4001 8.49998 13.2001C8.29998 13.0001 7.99998 12.9001 7.49998 12.9001H6.79998V15.3001Z\",fill:\"white\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M18.5 15.4001C18.5 16.7001 18.1 17.7001 17.4 18.4001C16.7 19.1001 15.6 19.4001 14.2 19.4001H12V11.6001H14.5C15.8 11.6001 16.8 11.9001 17.5 12.6001C18.2 13.3001 18.5 14.2001 18.5 15.4001ZM16.8 15.5001C16.8 13.8001 16.1 13.0001 14.6 13.0001H13.7V18.0001H14.4C16 18.0001 16.8 17.2001 16.8 15.5001Z\",fill:\"white\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21.7999 19.4001H20.2V11.6001H24.7V13.0001H21.7999V15.0001H24.5V16.4001H21.7999V19.4001Z\",fill:\"white\"})]})})]})]})]});}","map":{"version":3,"names":["useCallback","useContext","useEffect","useRef","DispatchContext","htmlDecode","AppState","Button","InfoBarStyles","InfoBar","data","dispatch","infoBar","handleKeyDown","e","key","type","SHOW_INFO_BAR","mode","window","addEventListener","current","focus","document","body","classList","add","removeEventListener","remove","image","imageAlt","title","content","__html","distance","postcode","accessibility_terrain_walk_info","facilities_accessibility","links","map","link","i","url","target","download"],"sources":["/Users/harryedwards/Work/FL/_examples/mapping/src/components/infoBar/InfoBar.tsx"],"sourcesContent":["import { useCallback, useContext, useEffect, useRef } from 'react'\nimport { DispatchContext } from '../../MapApp'\nimport { htmlDecode } from '../../helpers'\nimport {\n  AppState,\n  DispatchContextT,\n  MarkerEntity,\n  RouteEntity,\n} from '../../utils/types'\nimport Button from '../../ui/Button'\nimport InfoBarStyles from './InfoBar.styles'\n\ntype Props = {\n  data: MarkerEntity | RouteEntity\n}\n\n/**\n * InfoBar content\n */\nexport default function InfoBar({ data }: Props) {\n  const { dispatch } = useContext(DispatchContext) as DispatchContextT\n  const infoBar = useRef(null)\n\n  // Close infoBar when pressing `Esc` key\n  const handleKeyDown = useCallback(\n    (e: KeyboardEvent): void => {\n      if (e.key === 'Escape') {\n        dispatch({ type: AppState.SHOW_INFO_BAR, mode: null })\n      }\n    },\n    [dispatch]\n  )\n\n  useEffect(() => {\n    // When infoBar open, listen for keypress, & set focus for correct tabbing control\n    window.addEventListener('keydown', handleKeyDown)\n    // @ts-ignore\n    infoBar.current.focus()\n    document.body.classList.add('locked')\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown)\n      document.body.classList.remove('locked')\n    }\n  }, [handleKeyDown])\n\n  return (\n    <InfoBarStyles ref={infoBar} tabIndex={0}>\n      <Button\n        clicked={() => dispatch({ type: AppState.SHOW_INFO_BAR, mode: null })}\n        classes={'block-map__info__close'}\n        ariaLabel={'Close info bar and return to map'}\n      >\n        <svg viewBox=\"0 0 22 28\">\n          <path d=\"M20.281 20.656c0 0.391-0.156 0.781-0.438 1.062l-2.125 2.125c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-4.594-4.594-4.594 4.594c-0.281 0.281-0.672 0.438-1.062 0.438s-0.781-0.156-1.062-0.438l-2.125-2.125c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l4.594-4.594-4.594-4.594c-0.281-0.281-0.438-0.672-0.438-1.062s0.156-0.781 0.438-1.062l2.125-2.125c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l4.594 4.594 4.594-4.594c0.281-0.281 0.672-0.438 1.062-0.438s0.781 0.156 1.062 0.438l2.125 2.125c0.281 0.281 0.438 0.672 0.438 1.062s-0.156 0.781-0.438 1.062l-4.594 4.594 4.594 4.594c0.281 0.281 0.438 0.672 0.438 1.062z\"></path>\n        </svg>\n      </Button>\n\n      {data.image && (\n        <img\n          src={data.image}\n          alt={data.imageAlt ? data.imageAlt : data.title}\n        />\n      )}\n\n      <div className=\"info\">\n        <h3>{htmlDecode(data.title)}</h3>\n\n        {data.content && (\n          <div dangerouslySetInnerHTML={{ __html: data.content }}></div>\n        )}\n\n        {data.distance && (\n          <>\n            <h4>Distance</h4>\n            <p>{data.distance}</p>\n          </>\n        )}\n\n        {data.postcode && (\n          <>\n            <h4>Postcode</h4>\n            <p>{data.postcode}</p>\n          </>\n        )}\n\n        {data.accessibility_terrain_walk_info && (\n          <>\n            <h4>Accessibility/terrain/walk info</h4>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: data.accessibility_terrain_walk_info,\n              }}\n            ></div>\n          </>\n        )}\n\n        {data.facilities_accessibility && (\n          <>\n            <h4>Facilities &amp; accessibility</h4>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: data.facilities_accessibility,\n              }}\n            ></div>\n          </>\n        )}\n\n        {data.links && (\n          <>\n            <h4>More information</h4>\n\n            <div className=\"links\">\n              {data.links.map((link, i) => (\n                <a key={i} href={link.url} target={link.target}>\n                  {link.title}\n                </a>\n              ))}\n            </div>\n          </>\n        )}\n\n        {data.download && (\n          <>\n            <h4>Download more information</h4>\n            <a href={data.download} title=\"Download file\" className=\"download\">\n              <svg\n                width=\"50\"\n                height=\"63\"\n                viewBox=\"0 0 50 63\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M49.3 53.9001H47.3V14.6001L35.3 2.6001H7.59998V53.9001H5.59998V0.600098H36.2L49.3 13.8001V53.9001Z\"\n                  fill=\"#686867\"\n                />\n                <path\n                  d=\"M49.3 54.9001H41.7V52.9001H47.3V15.8001H34.1V2.6001H7.59998V52.9001H13.2V54.9001H5.59998V0.600098H36.1V13.8001H49.3V54.9001Z\"\n                  fill=\"#686867\"\n                />\n                <path\n                  d=\"M40.9 48.9L27.5 62.1L14.1 48.9H20.7V33H34.3V48.9H40.9Z\"\n                  fill=\"#A65F8A\"\n                />\n                <path d=\"M29.8 8.8999H0V22.0999H29.8V8.8999Z\" fill=\"#A65F8A\" />\n                <path\n                  d=\"M10.5 14.0001C10.5 14.8001 10.2 15.5001 9.69998 15.9001C9.19998 16.3001 8.39998 16.6001 7.39998 16.6001H6.79998V19.4001H5.09998V11.6001H7.59998C8.59998 11.6001 9.29998 11.8001 9.79998 12.2001C10.3 12.6001 10.5 13.2001 10.5 14.0001ZM6.79998 15.3001H7.29998C7.79998 15.3001 8.19998 15.2001 8.39998 15.0001C8.69998 14.8001 8.79998 14.5001 8.79998 14.1001C8.79998 13.7001 8.69998 13.4001 8.49998 13.2001C8.29998 13.0001 7.99998 12.9001 7.49998 12.9001H6.79998V15.3001Z\"\n                  fill=\"white\"\n                />\n                <path\n                  d=\"M18.5 15.4001C18.5 16.7001 18.1 17.7001 17.4 18.4001C16.7 19.1001 15.6 19.4001 14.2 19.4001H12V11.6001H14.5C15.8 11.6001 16.8 11.9001 17.5 12.6001C18.2 13.3001 18.5 14.2001 18.5 15.4001ZM16.8 15.5001C16.8 13.8001 16.1 13.0001 14.6 13.0001H13.7V18.0001H14.4C16 18.0001 16.8 17.2001 16.8 15.5001Z\"\n                  fill=\"white\"\n                />\n                <path\n                  d=\"M21.7999 19.4001H20.2V11.6001H24.7V13.0001H21.7999V15.0001H24.5V16.4001H21.7999V19.4001Z\"\n                  fill=\"white\"\n                />\n              </svg>\n            </a>\n          </>\n        )}\n      </div>\n    </InfoBarStyles>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}