{"ast":null,"code":"import{useContext}from'react';import{Marker,Tooltip}from'react-leaflet';import{StateContext}from'../../MapApp';import{htmlDecode}from'../../helpers';import{markerIcons}from'../../data/markerIcons';import L from'leaflet';import PopupWrapper from'../PopupWrapper';import useFilters from'../../hooks/useFilters';/**\n * Output markers on the map\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Markers(){var _ref=useContext(StateContext),state=_ref.state;var markerData=state.markerData,activeMarkerFilters=state.activeMarkerFilters;// Get filtered results based on state\nvar results=useFilters(markerData,activeMarkerFilters);return/*#__PURE__*/_jsx(_Fragment,{children:// @ts-ignore\nresults.map(function(marker){// Get custom icon by last picked TID, if not found use default icon\nvar iconTid=+marker.categories.filter(function(icon){return activeMarkerFilters.includes(icon);});var hasIcon=markerIcons.filter(function(icon){return iconTid===icon;});var icon=L.icon({iconUrl:\"\".concat(window.location.origin,\"/wp-content/themes/chilterns/dist/img/map/pin/\").concat(hasIcon?+hasIcon:0,\".svg\"),iconSize:[28,40],iconAnchor:[13,39],popupAnchor:[3,-27]});return/*#__PURE__*/_jsxs(Marker,{icon:icon,position:marker.position,riseOnHover:true,children:[/*#__PURE__*/_jsx(PopupWrapper,{infoContent:marker}),/*#__PURE__*/_jsx(Tooltip,{children:htmlDecode(marker.title)})]},marker.id);})});}","map":{"version":3,"names":["useContext","Marker","Tooltip","StateContext","htmlDecode","markerIcons","L","PopupWrapper","useFilters","Markers","state","markerData","activeMarkerFilters","results","map","marker","iconTid","categories","filter","icon","includes","hasIcon","iconUrl","window","location","origin","iconSize","iconAnchor","popupAnchor","position","title","id"],"sources":["/Users/harryedwards/Work/FL/_examples/mapping/src/components/markers/Markers.tsx"],"sourcesContent":["import { useContext } from 'react'\nimport { Marker, Tooltip } from 'react-leaflet'\nimport { StateContext } from '../../MapApp'\nimport { htmlDecode } from '../../helpers'\nimport { markerIcons } from '../../data/markerIcons'\nimport { MarkerEntity, StateContextT } from '../../utils/types'\nimport L from 'leaflet'\nimport PopupWrapper from '../PopupWrapper'\nimport useFilters from '../../hooks/useFilters'\n\n/**\n * Output markers on the map\n */\nexport default function Markers() {\n  const { state } = useContext(StateContext) as StateContextT\n  const { markerData, activeMarkerFilters } = state\n\n  // Get filtered results based on state\n  const results = useFilters(markerData, activeMarkerFilters)\n\n  return (\n    <>\n      {\n        // @ts-ignore\n        results.map((marker: MarkerEntity) => {\n          // Get custom icon by last picked TID, if not found use default icon\n          const iconTid = +marker.categories!.filter(icon =>\n            activeMarkerFilters.includes(icon)\n          )\n          const hasIcon = markerIcons.filter(icon => iconTid === icon)\n\n          const icon = L.icon({\n            iconUrl: `${\n              window.location.origin\n            }/wp-content/themes/chilterns/dist/img/map/pin/${\n              hasIcon ? +hasIcon : 0\n            }.svg`,\n            iconSize: [28, 40],\n            iconAnchor: [13, 39],\n            popupAnchor: [3, -27],\n          })\n\n          return (\n            <Marker\n              key={marker.id}\n              icon={icon}\n              position={marker.position}\n              riseOnHover={true}\n            >\n              <PopupWrapper infoContent={marker} />\n              <Tooltip>{htmlDecode(marker.title)}</Tooltip>\n            </Marker>\n          )\n        })\n      }\n    </>\n  )\n}\n"],"mappings":"AAAA,OAASA,UAAT,KAA2B,OAA3B,CACA,OAASC,MAAT,CAAiBC,OAAjB,KAAgC,eAAhC,CACA,OAASC,YAAT,KAA6B,cAA7B,CACA,OAASC,UAAT,KAA2B,eAA3B,CACA,OAASC,WAAT,KAA4B,wBAA5B,CAEA,MAAOC,EAAP,KAAc,SAAd,CACA,MAAOC,aAAP,KAAyB,iBAAzB,CACA,MAAOC,WAAP,KAAuB,wBAAvB,CAEA;AACA;AACA,G,6IACA,cAAe,SAASC,QAAT,EAAmB,CAChC,SAAkBT,UAAU,CAACG,YAAD,CAA5B,CAAQO,KAAR,MAAQA,KAAR,CACA,GAAQC,WAAR,CAA4CD,KAA5C,CAAQC,UAAR,CAAoBC,mBAApB,CAA4CF,KAA5C,CAAoBE,mBAApB,CAEA;AACA,GAAMC,QAAO,CAAGL,UAAU,CAACG,UAAD,CAAaC,mBAAb,CAA1B,CAEA,mBACE,yBAEI;AACAC,OAAO,CAACC,GAAR,CAAY,SAACC,MAAD,CAA0B,CACpC;AACA,GAAMC,QAAO,CAAG,CAACD,MAAM,CAACE,UAAP,CAAmBC,MAAnB,CAA0B,SAAAC,IAAI,QAC7CP,oBAAmB,CAACQ,QAApB,CAA6BD,IAA7B,CAD6C,EAA9B,CAAjB,CAGA,GAAME,QAAO,CAAGhB,WAAW,CAACa,MAAZ,CAAmB,SAAAC,IAAI,QAAIH,QAAO,GAAKG,IAAhB,EAAvB,CAAhB,CAEA,GAAMA,KAAI,CAAGb,CAAC,CAACa,IAAF,CAAO,CAClBG,OAAO,WACLC,MAAM,CAACC,QAAP,CAAgBC,MADX,0DAGLJ,OAAO,CAAG,CAACA,OAAJ,CAAc,CAHhB,QADW,CAMlBK,QAAQ,CAAE,CAAC,EAAD,CAAK,EAAL,CANQ,CAOlBC,UAAU,CAAE,CAAC,EAAD,CAAK,EAAL,CAPM,CAQlBC,WAAW,CAAE,CAAC,CAAD,CAAI,CAAC,EAAL,CARK,CAAP,CAAb,CAWA,mBACE,MAAC,MAAD,EAEE,IAAI,CAAET,IAFR,CAGE,QAAQ,CAAEJ,MAAM,CAACc,QAHnB,CAIE,WAAW,CAAE,IAJf,wBAME,KAAC,YAAD,EAAc,WAAW,CAAEd,MAA3B,EANF,cAOE,KAAC,OAAD,WAAUX,UAAU,CAACW,MAAM,CAACe,KAAR,CAApB,EAPF,GACOf,MAAM,CAACgB,EADd,CADF,CAWD,CA7BD,CAHJ,EADF,CAqCD"},"metadata":{},"sourceType":"module"}