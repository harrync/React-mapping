{"ast":null,"code":"var _jsxFileName = \"/Users/harryedwards/Work/FL/_examples/mapping/src/components/markers/Markers.tsx\",\n    _s = $RefreshSig$();\n\nimport { useContext } from 'react';\nimport { Marker, Tooltip } from 'react-leaflet';\nimport { StateContext } from '../../MapApp';\nimport { htmlDecode } from '../../helpers';\nimport { markerIcons } from '../../data/markerIcons';\nimport L from 'leaflet';\nimport PopupWrapper from '../PopupWrapper';\nimport useFilters from '../../hooks/useFilters';\n/**\n * Output markers on the map\n */\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Markers() {\n  _s();\n\n  const {\n    state\n  } = useContext(StateContext);\n  const {\n    markerData,\n    activeMarkerFilters\n  } = state; // Get filtered results based on state\n\n  const results = useFilters(markerData, activeMarkerFilters);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: results.map(marker => {\n      // Get custom icon by last picked TID, if not found use default icon\n      const iconTid = +marker.categories.filter(icon => activeMarkerFilters.includes(icon));\n      const hasIcon = markerIcons.filter(icon => iconTid === icon);\n      const icon = L.icon({\n        iconUrl: `${window.location.origin}/wp-content/themes/chilterns/dist/img/map/pin/${hasIcon ? +hasIcon : 0}.svg`,\n        iconSize: [28, 40],\n        iconAnchor: [13, 39],\n        popupAnchor: [3, -27]\n      });\n      return /*#__PURE__*/_jsxDEV(Marker, {\n        icon: icon,\n        position: marker.position,\n        riseOnHover: true,\n        children: [/*#__PURE__*/_jsxDEV(PopupWrapper, {\n          infoContent: marker\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n          children: htmlDecode(marker.title)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this)]\n      }, marker.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false);\n}\n\n_s(Markers, \"RxKIwnmWnl0YRaBH4v8zGP2vdF4=\", false, function () {\n  return [useFilters];\n});\n\n_c = Markers;\n\nvar _c;\n\n$RefreshReg$(_c, \"Markers\");","map":{"version":3,"names":["useContext","Marker","Tooltip","StateContext","htmlDecode","markerIcons","L","PopupWrapper","useFilters","Markers","state","markerData","activeMarkerFilters","results","map","marker","iconTid","categories","filter","icon","includes","hasIcon","iconUrl","window","location","origin","iconSize","iconAnchor","popupAnchor","position","title","id"],"sources":["/Users/harryedwards/Work/FL/_examples/mapping/src/components/markers/Markers.tsx"],"sourcesContent":["import { useContext } from 'react'\nimport { Marker, Tooltip } from 'react-leaflet'\nimport { StateContext } from '../../MapApp'\nimport { htmlDecode } from '../../helpers'\nimport { markerIcons } from '../../data/markerIcons'\nimport { MarkerEntity, Icon, StateContextT } from '../../utils/types'\nimport L from 'leaflet'\nimport PopupWrapper from '../PopupWrapper'\nimport useFilters from '../../hooks/useFilters'\n\n/**\n * Output markers on the map\n */\nexport default function Markers() {\n  const { state } = useContext(StateContext) as StateContextT\n  const { markerData, activeMarkerFilters } = state\n\n  // Get filtered results based on state\n  const results = useFilters(markerData, activeMarkerFilters)\n\n  return (\n    <>\n      {results.map((marker: MarkerEntity) => {\n        // Get custom icon by last picked TID, if not found use default icon\n        const iconTid = +marker.categories.filter(icon =>\n          activeMarkerFilters.includes(icon)\n        )\n        const hasIcon = markerIcons.filter(icon => iconTid === icon)\n\n        const icon = L.icon({\n          iconUrl: `${\n            window.location.origin\n          }/wp-content/themes/chilterns/dist/img/map/pin/${\n            hasIcon ? +hasIcon : 0\n          }.svg`,\n          iconSize: [28, 40],\n          iconAnchor: [13, 39],\n          popupAnchor: [3, -27],\n        })\n\n        return (\n          <Marker\n            key={marker.id}\n            icon={icon}\n            position={marker.position}\n            riseOnHover={true}\n          >\n            <PopupWrapper infoContent={marker} />\n            <Tooltip>{htmlDecode(marker.title)}</Tooltip>\n          </Marker>\n        )\n      })}\n    </>\n  )\n}\n"],"mappings":";;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,MAAT,EAAiBC,OAAjB,QAAgC,eAAhC;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,WAAT,QAA4B,wBAA5B;AAEA,OAAOC,CAAP,MAAc,SAAd;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AAEA;AACA;AACA;;;;AACA,eAAe,SAASC,OAAT,GAAmB;EAAA;;EAChC,MAAM;IAAEC;EAAF,IAAYV,UAAU,CAACG,YAAD,CAA5B;EACA,MAAM;IAAEQ,UAAF;IAAcC;EAAd,IAAsCF,KAA5C,CAFgC,CAIhC;;EACA,MAAMG,OAAO,GAAGL,UAAU,CAACG,UAAD,EAAaC,mBAAb,CAA1B;EAEA,oBACE;IAAA,UACGC,OAAO,CAACC,GAAR,CAAaC,MAAD,IAA0B;MACrC;MACA,MAAMC,OAAO,GAAG,CAACD,MAAM,CAACE,UAAP,CAAkBC,MAAlB,CAAyBC,IAAI,IAC5CP,mBAAmB,CAACQ,QAApB,CAA6BD,IAA7B,CADe,CAAjB;MAGA,MAAME,OAAO,GAAGhB,WAAW,CAACa,MAAZ,CAAmBC,IAAI,IAAIH,OAAO,KAAKG,IAAvC,CAAhB;MAEA,MAAMA,IAAI,GAAGb,CAAC,CAACa,IAAF,CAAO;QAClBG,OAAO,EAAG,GACRC,MAAM,CAACC,QAAP,CAAgBC,MACjB,iDACCJ,OAAO,GAAG,CAACA,OAAJ,GAAc,CACtB,MALiB;QAMlBK,QAAQ,EAAE,CAAC,EAAD,EAAK,EAAL,CANQ;QAOlBC,UAAU,EAAE,CAAC,EAAD,EAAK,EAAL,CAPM;QAQlBC,WAAW,EAAE,CAAC,CAAD,EAAI,CAAC,EAAL;MARK,CAAP,CAAb;MAWA,oBACE,QAAC,MAAD;QAEE,IAAI,EAAET,IAFR;QAGE,QAAQ,EAAEJ,MAAM,CAACc,QAHnB;QAIE,WAAW,EAAE,IAJf;QAAA,wBAME,QAAC,YAAD;UAAc,WAAW,EAAEd;QAA3B;UAAA;UAAA;UAAA;QAAA,QANF,eAOE,QAAC,OAAD;UAAA,UAAUX,UAAU,CAACW,MAAM,CAACe,KAAR;QAApB;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA,GACOf,MAAM,CAACgB,EADd;QAAA;QAAA;QAAA;MAAA,QADF;IAWD,CA7BA;EADH,iBADF;AAkCD;;GAzCuBtB,O;UAKND,U;;;KALMC,O"},"metadata":{},"sourceType":"module"}